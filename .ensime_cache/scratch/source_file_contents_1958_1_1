package aoc

import org.scalatest._
import org.scalatest.prop._
import org.scalacheck.Gen

class Day21Check extends PropSpec with GeneratorDrivenPropertyChecks with Matchers {

  // disable shrinking (to make debugging easier)
  import org.scalacheck.Shrink
  implicit def noShrink[T]: Shrink[T] = Shrink.shrinkAny

  import scala.util.Random
  import sc

  val grid 
  lazy val genGrid = for {
    n <- Gen.posNum[Int]
    if(n % 2 == 0 || n % 3 == 0)
    row <- 0 until n
    col <- 0 until n
    cell <- Gen.choose('#', '.')
    
  } yield {
    Day20.Particle(Day20.Position(x, y, z), Day20.Velocity(0, 0, 0), Day20.Acceleration(0, 0, 0))
  }

  lazy val genParticles = Gen.listOf(genParticle)

  property("For all possible lists of particles, the nullParticle is always the closest") {
    forAll(genParticles) {ps => {
      val nullParticle = Day20.Particle(Day20.Position(0, 0, 0), Day20.Velocity(0, 0, 0), Day20.Acceleration(0, 0, 0))
      val pss = nullParticle :: ps
      val closest = Day20.findClosest(pss)
      pss(closest) should be (nullParticle)
    }}
  }
}
